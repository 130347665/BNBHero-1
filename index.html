<head>
  <link
    href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"
    rel="stylesheet"
  />
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.6.1/web3.min.js"
    integrity="sha512-5erpERW8MxcHDF7Xea9eBQPiRtxbse70pFcaHJuOhdEBQeAxGQjUwgJbuBDWve+xP/u5IoJbKjyJk50qCnMD7A=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
</head>

<body class="h-full">
  <div
    class="
      flex
      w-full
      h-full
      justify-center
      content-center
      items-center
      space-x-4
    "
  >
    <div class="flex flex-col space-y-6">
      <h3 class="text-center">Working with Web3.js!</h3>
      <div class="flex flex-col space-y-2">
        <button
          onclick="loginWithEth()"
          class="
            rounded
            bg-white
            border border-gray-400
            hover:bg-gray-100
            py-2
            px-4
            text-gray-600
            hover:text-gray-700
          "
        >
          Login & Save ETH Address
        </button>
        <p id="userAddress" class="text-gray-600"></p>
        <button
          id="logoutButton"
          onclick="logout()"
          class="hidden text-blue-500 underline"
        >
          Logout
        </button>
      </div>
      <button
        id="getContractInfo"
        onclick="getContractSymbol()"
        class="rounded bg-blue-500 hover:bg-blue-700 py-2 px-4 text-white"
      >
        Get Contract Symbol
      </button>
      <div class="flex flex-col space-y-2"></div>
    </div>
  </div>

  <script>
    window.userAddress = null;
    window.onload = async () => {
      // Init Web3 connected to ETH network
      if (window.ethereum) {
        window.web3 = new Web3(window.ethereum);
      } else {
        alert("No ETH brower extension detected.");
      }

      // Load in Localstore key
      window.userAddress = window.localStorage.getItem("userAddress");
      showAddress();
    };

    // Use this function to turn a 42 character ETH address
    // into an address like 0x345...12345
    function truncateAddress(address) {
      if (!address) {
        return "";
      }
      return `${address.substr(0, 5)}...${address.substr(
        address.length - 5,
        address.length
      )}`;
    }

    // Display or remove the users know address on the frontend
    function showAddress() {
      if (!window.userAddress) {
        document.getElementById("userAddress").innerText = "";
        document.getElementById("logoutButton").classList.add("hidden");
        return false;
      }

      document.getElementById(
        "userAddress"
      ).innerText = `ETH Address: ${truncateAddress(window.userAddress)}`;
      document.getElementById("logoutButton").classList.remove("hidden");
    }

    // remove stored user address and reset frontend
    function logout() {
      window.userAddress = null;
      window.localStorage.removeItem("userAddress");
      showAddress();
    }

    // Login with Web3 via Metamasks window.ethereum library
    async function loginWithEth() {
      if (window.web3) {
        try {
          // We use this since ethereum.enable() is deprecated. This method is not
          // available in Web3JS - so we call it directly from metamasks' library
          const selectedAccount = await window.ethereum
            .request({
              method: "eth_requestAccounts",
            })
            .then((accounts) => accounts[0])
            .catch(() => {
              throw Error("No account selected!");
            });
          window.userAddress = selectedAccount;
          window.localStorage.setItem("userAddress", selectedAccount);
          showAddress();
        } catch (error) {
          console.error(error);
        }
      } else {
        alert("No ETH brower extension detected.");
      }
    }

    // Go to blockchain and get the contract symbol. Keep in mind
    // YOU MUST BE CONNECT TO RINKEBY NETWORK TO USE THIS FUNCTION
    // why -> because this specific contract address is on ethereum.
    // When you click login, just make sure your network is Rinkeby and it will all workout.
    async function getContractSymbol() {
      const CONTRACT_ADDRESS = "0xD25631648E3Ad4863332319E8E0d6f2A8EC6f267";
      const contract = new window.web3.eth.Contract(
        window.ABI,
        CONTRACT_ADDRESS
      );
      const symbol = await contract.methods
        .symbol()
        .call({ from: window.userAddress });
      alert(`Contract ${CONTRACT_ADDRESS} Symbol: ${symbol}`);
    }

    window.ABI = [
      {
"inputs":[
],
"stateMutability":"nonpayable",
"type":"constructor"
},
{
"anonymous":false,
"inputs":[
{
"indexed":true,
"internalType":"address",
"name":"owner",
"type":"address"
},
{
"indexed":true,
"internalType":"address",
"name":"spender",
"type":"address"
},
{
"indexed":false,
"internalType":"uint256",
"name":"value",
"type":"uint256"
}
],
"name":"Approval",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"ExcludedFromFee",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"IncludedToFee",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":true,
"internalType":"address",
"name":"previousOwner",
"type":"address"
},
{
"indexed":true,
"internalType":"address",
"name":"newOwner",
"type":"address"
}
],
"name":"OwnershipTransferred",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"uint256",
"name":"token",
"type":"uint256"
},
{
"indexed":false,
"internalType":"uint256",
"name":"liquidAmount",
"type":"uint256"
},
{
"indexed":false,
"internalType":"uint256",
"name":"bnbPool",
"type":"uint256"
},
{
"indexed":false,
"internalType":"uint256",
"name":"bnbLiquidity",
"type":"uint256"
}
],
"name":"SwapAndCharged",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"uint256",
"name":"tokensSwapped",
"type":"uint256"
},
{
"indexed":false,
"internalType":"uint256",
"name":"ethReceived",
"type":"uint256"
},
{
"indexed":false,
"internalType":"uint256",
"name":"tokensIntoLiquidity",
"type":"uint256"
}
],
"name":"SwapAndLiquify",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"bool",
"name":"enabled",
"type":"bool"
}
],
"name":"SwapAndLiquifyEnabledUpdated",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":true,
"internalType":"address",
"name":"from",
"type":"address"
},
{
"indexed":true,
"internalType":"address",
"name":"to",
"type":"address"
},
{
"indexed":false,
"internalType":"uint256",
"name":"value",
"type":"uint256"
}
],
"name":"Transfer",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"UpdateBNBPoolAddress",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"uint256",
"name":"bnbFee",
"type":"uint256"
},
{
"indexed":false,
"internalType":"uint256",
"name":"liquidityFee",
"type":"uint256"
}
],
"name":"UpdateFees",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"uint256",
"name":"amount",
"type":"uint256"
}
],
"name":"UpdateNumtokensToSwap",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"uint256",
"name":"timeForContract",
"type":"uint256"
}
],
"name":"UpdatedCoolDowntime",
"type":"event"
},
{
"anonymous":false,
"inputs":[
{
"indexed":false,
"internalType":"uint256",
"name":"maxTxAmount",
"type":"uint256"
}
],
"name":"UpdatedMaxTxAmount",
"type":"event"
},
{
"inputs":[
],
"name":"_BNBFee",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"_liquidityFee",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"_maxTxAmount",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"owner",
"type":"address"
},
{
"internalType":"address",
"name":"spender",
"type":"address"
}
],
"name":"allowance",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"spender",
"type":"address"
},
{
"internalType":"uint256",
"name":"amount",
"type":"uint256"
}
],
"name":"approve",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"balanceOf",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"bnbPoolAddress",
"outputs":[
{
"internalType":"address",
"name":"",
"type":"address"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"decimals",
"outputs":[
{
"internalType":"uint8",
"name":"",
"type":"uint8"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"spender",
"type":"address"
},
{
"internalType":"uint256",
"name":"subtractedValue",
"type":"uint256"
}
],
"name":"decreaseAllowance",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"excludeFromFee",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
],
"name":"geUnlockTime",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"getOwner",
"outputs":[
{
"internalType":"address",
"name":"",
"type":"address"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"includeInFee",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"spender",
"type":"address"
},
{
"internalType":"uint256",
"name":"addedValue",
"type":"uint256"
}
],
"name":"increaseAllowance",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"isExcludedFromFee",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
{
"internalType":"uint256",
"name":"time",
"type":"uint256"
}
],
"name":"lock",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
],
"name":"name",
"outputs":[
{
"internalType":"string",
"name":"",
"type":"string"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"owner",
"outputs":[
{
"internalType":"address",
"name":"",
"type":"address"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"pancakeswapV2Pair",
"outputs":[
{
"internalType":"address",
"name":"",
"type":"address"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"pancakeswapV2Router",
"outputs":[
{
"internalType":"contract IPancakeswapV2Router02",
"name":"",
"type":"address"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"presaleEnded",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"renounceOwnership",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"account",
"type":"address"
}
],
"name":"setBNBPoolAddress",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"uint256",
"name":"timeForContract",
"type":"uint256"
}
],
"name":"setCoolDownTime",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"uint256",
"name":"bnbFee",
"type":"uint256"
},
{
"internalType":"uint256",
"name":"liquidityFee",
"type":"uint256"
}
],
"name":"setFees",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"uint256",
"name":"maxTxAmount",
"type":"uint256"
}
],
"name":"setMaxTxAmount",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"uint256",
"name":"amount",
"type":"uint256"
}
],
"name":"setNumTokensToSwap",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"bool",
"name":"_enabled",
"type":"bool"
}
],
"name":"setSwapAndLiquifyEnabled",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
],
"name":"swapAndLiquifyEnabled",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"swapCoolDownTime",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"symbol",
"outputs":[
{
"internalType":"string",
"name":"",
"type":"string"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
],
"name":"totalSupply",
"outputs":[
{
"internalType":"uint256",
"name":"",
"type":"uint256"
}
],
"stateMutability":"view",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"recipient",
"type":"address"
},
{
"internalType":"uint256",
"name":"amount",
"type":"uint256"
}
],
"name":"transfer",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"sender",
"type":"address"
},
{
"internalType":"address",
"name":"recipient",
"type":"address"
},
{
"internalType":"uint256",
"name":"amount",
"type":"uint256"
}
],
"name":"transferFrom",
"outputs":[
{
"internalType":"bool",
"name":"",
"type":"bool"
}
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"address",
"name":"newOwner",
"type":"address"
}
],
"name":"transferOwnership",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
],
"name":"unlock",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"inputs":[
{
"internalType":"bool",
"name":"status",
"type":"bool"
}
],
"name":"updatePresaleStatus",
"outputs":[
],
"stateMutability":"nonpayable",
"type":"function"
},
{
"stateMutability":"payable",
"type":"receive"
},
    ];
  </script>
</body>